<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>Short URL Generator</title>
  <link rel="icon" href="/images/link.png">
  <link rel="stylesheet" href="/css/style.css"> 
</head>
<body class="body">

  <!-- Navbar -->
  <nav class="navbar">
    <div >
      <ul class="nav-links">
        <li><a href="/">Home</a></li>
        <li><a href="/login">Login</a></li>
        <li><a href="/register">Register</a></li>
      </ul>
    </div>
  </nav>

  <!-- Main Content -->
  <div class="container">
    <div class="short-url-box">
      <form action="http://localhost:8000/api/v1/generate/shortUrl" method="post">
        <h1>Shorten Your URL</h1>
        <input type="text" placeholder="Enter your long URL" class="url-input" name="url" value="<%= locals.longUrl %>">
        <button type="submit" class="generate-btn">Generate Short URL</button>
        <% if (locals.error) { %>
            <p class="error"><%= locals.error %></p>
        <% } %>
      </form>
      <% if (locals.shortUrl) { %>
        <div class="result">
            <p>Your Short URL:</p>
            <div class="short-url" id="shortUrl">
                <a href="<%= locals.shortUrl %>" target="_blank">
                    <%= locals.shortUrl %>
                </a>
            </div>
            <button class="copy-btn" id="copyBtn" onclick="copyToClipboard()">Copy</button>
            <button class="generate-new-btn" onclick="generateNew()">Generate New</button>
        </div>
      <% } %>
    
    </div>
  </div>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2025 Short URL Generator. All Rights Reserved.</p>
  </footer>

  <script>
    function copyToClipboard() {
      const shortUrl = document.getElementById("shortUrl").textContent;
      const copyBtn = document.getElementById("copyBtn");
      
      navigator.clipboard.writeText(shortUrl).then(() => {
        copyBtn.textContent = "Copied"; 
        
        setTimeout(() => {
          copyBtn.textContent = "Copy";
        }, 2000);
      }).catch(err => {
        console.error("Failed to copy: ", err);
      });
    }

    function generateNew() {
      window.location.href = "/"; 
    }
  </script>

</body>
</html>
